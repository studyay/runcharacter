<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>타임 타이머</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #f3f4f6;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    padding-top: 40px;
  }

  h1 {
    font-size: 26px;
    margin-bottom: 20px;
  }

  .preset-row {
    display: flex;
    gap: 8px;
    margin-bottom: 24px;
  }

  .preset-row button {
    border: none;
    border-radius: 999px;
    padding: 8px 14px;
    font-size: 14px;
    cursor: pointer;
    background: #f97373;
    color: white;
    box-shadow: 0 2px 0 #d24f4f;
    transition: transform 0.1s, box-shadow 0.1s, background 0.15s;
  }

  .preset-row button.active {
    background: #ff5c5c;
    transform: translateY(1px);
    box-shadow: 0 0 0 #d24f4f;
  }

  #timer-wrap {
    position: relative;
    width: 260px;
    height: 260px;
    margin-bottom: 18px;
  }

  /* 메인 원 영역 */
  #dial {
    position: absolute;
    inset: 0;
  }

  #dial svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);         /* 12시 방향에서 시작 */
    transform-origin: 50% 50%;
  }

  #time-text {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 36px;
    font-weight: 600;
    color: #111827;
  }

  .control-row {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-bottom: 10px;
  }

  .control-row button {
    min-width: 90px;
    padding: 8px 0;
    border-radius: 999px;
    border: none;
    font-size: 14px;
    cursor: pointer;
    box-shadow: 0 2px 0 rgba(0,0,0,0.15);
    transition: transform 0.1s, box-shadow 0.1s, background 0.15s;
  }

  #toggle-btn {
    background: #111827;
    color: white;
  }

  #reset-btn {
    background: #f97373;
    color: white;
  }

  .control-row button:active {
    transform: translateY(1px);
    box-shadow: 0 0 0 rgba(0,0,0,0.15);
  }

  .hint {
    font-size: 12px;
    color: #6b7280;
    text-align: center;
  }
</style>
</head>
<body>

<h1>타임 타이머</h1>

<div class="preset-row">
  <button data-min="15">15분</button>
  <button data-min="20">20분</button>
  <button data-min="30">30분</button>
  <button data-min="40">40분</button>
  <button data-min="50">50분</button>
</div>

<div id="timer-wrap">

  <!-- 원형 다이얼(SVG) -->
  <div id="dial">
    <svg viewBox="0 0 260 260">
      <!-- 회색 전체 배경 링 -->
      <circle
        cx="130" cy="130" r="110"
        stroke="#e5e7eb"
        stroke-width="28"
        fill="white"
      />
      <!-- 빨간 진행 링 (이게 줄어듦) -->
      <circle
        id="arc"
        cx="130" cy="130" r="110"
        stroke="#f97373"
        stroke-width="28"
        fill="transparent"
        stroke-linecap="butt"
      />
    </svg>
  </div>

  <!-- 중앙 시간 텍스트 -->
  <div id="time-text">00:00</div>
</div>

<div class="control-row">
  <button id="toggle-btn">시작</button>
  <button id="reset-btn">리셋</button>
</div>

<p class="hint">위 시간 버튼을 먼저 누르고, 시작/일시정지를 눌러보세요.</p>

<script>
  const radius = 110;
  const circle = document.getElementById("arc");
  const length = 2 * Math.PI * radius;
  circle.style.strokeDasharray = length;
  circle.style.strokeDashoffset = length;

  const timeText = document.getElementById("time-text");
  const toggleBtn = document.getElementById("toggle-btn");
  const resetBtn = document.getElementById("reset-btn");
  const presetButtons = document.querySelectorAll(".preset-row button");

  let totalSec = 0;
  let remainSec = 0;
  let timerId = null;
  let running = false;

  function format(sec) {
    const m = String(Math.floor(sec / 60)).padStart(2, "0");
    const s = String(sec % 60).padStart(2, "0");
    return `${m}:${s}`;
  }

  function updateDial() {
    timeText.textContent = totalSec ? format(remainSec) : "00:00";
    if (!totalSec) {
      circle.style.strokeDashoffset = length;
      return;
    }
    const ratio = remainSec / totalSec;
    circle.style.strokeDashoffset = length * (1 - ratio);
  }

  function setTimer(minutes) {
    stopTimer();
    totalSec = minutes * 60;
    remainSec = totalSec;
    presetButtons.forEach(b => b.classList.remove("active"));
    presetButtons.forEach(b => {
      if (Number(b.dataset.min) === minutes) b.classList.add("active");
    });
    updateDial();
  }

  function startTimer() {
    if (running || !totalSec) return;
    running = true;
    toggleBtn.textContent = "일시정지";

    timerId = setInterval(() => {
      remainSec--;
      if (remainSec <= 0) {
        remainSec = 0;
        updateDial();
        stopTimer();
        alert("타이머가 끝났어요! 잠깐 쉬어 볼까요?");
        return;
      }
      updateDial();
    }, 1000);
  }

  function stopTimer() {
    running = false;
    toggleBtn.textContent = "시작";
    if (timerId !== null) {
      clearInterval(timerId);
      timerId = null;
    }
  }

  function resetTimer() {
    if (!totalSec) return;
    stopTimer();
    remainSec = totalSec;
    updateDial();
  }

  presetButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      const min = Number(btn.dataset.min);
      setTimer(min);
    });
  });

  toggleBtn.addEventListener("click", () => {
    if (running) stopTimer();
    else startTimer();
  });

  resetBtn.addEventListener("click", resetTimer);

  updateDial();
</script>

</body>
</html>
