<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>íƒ€ì´ë¨¸</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #0f172a, #020617);
      color: #e5e7eb;
      padding: 24px;
    }

    .timer-card {
      width: 380px;
      max-width: 100%;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 20px;
      padding: 22px 24px 26px;
      box-shadow: 0 24px 50px rgba(0, 0, 0, 0.7);
    }

    h1 {
      font-size: 22px;
      margin-bottom: 6px;
      text-align: center;
    }

    .subtitle {
      font-size: 13px;
      text-align: center;
      opacity: 0.85;
      margin-bottom: 14px;
    }

    .preset-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
      margin-bottom: 14px;
    }

    .preset-buttons button {
      border: none;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 13px;
      cursor: pointer;
      background: #1f2937;
      color: #e5e7eb;
      transition: background 0.15s, transform 0.1s;
    }

    .preset-buttons button.active {
      background: #22c55e;
      color: #052e16;
      transform: translateY(-1px);
    }

    .time-display {
      text-align: center;
      margin: 12px 0 8px;
    }

    .time-label {
      font-size: 13px;
      opacity: 0.8;
      margin-bottom: 4px;
    }

    #time-text {
      font-size: 40px;
      font-weight: 600;
      letter-spacing: 0.08em;
      font-variant-numeric: tabular-nums;
    }

    .progress-wrapper {
      margin-top: 14px;
      margin-bottom: 10px;
    }

    .progress-back {
      width: 100%;
      height: 10px;
      border-radius: 999px;
      background: #020617;
      overflow: hidden;
    }

    #progress-bar {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #0ea5e9);
      transition: width 0.2s;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      opacity: 0.75;
      margin-top: 4px;
    }

    .control-buttons {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      justify-content: center;
    }

    .control-buttons button {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.15s, transform 0.1s;
    }

    #toggle-btn {
      background: #22c55e;
      color: #052e16;
      font-weight: 600;
    }

    #reset-btn {
      background: #0f172a;
      color: #e5e7eb;
    }

    .control-buttons button:active {
      transform: translateY(1px);
    }

    .note {
      font-size: 11px;
      text-align: center;
      opacity: 0.65;
      margin-top: 8px;
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <div class="timer-card">
    <h1>íƒ€ì´ë¨¸</h1>
    <p class="subtitle">ì§‘ì¤‘ Â· ì‰¬ëŠ” ì‹œê°„ ì—°ìŠµìš© íƒ€ì´ë¨¸ì…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ë¥¼ ë°”ê¿”ì„œ ìì‹ ë§Œì˜ íƒ€ì´ë¨¸ë¡œ ê¾¸ë©°ë³´ì„¸ìš”.</p>

    <!-- ì‹œê°„ í”„ë¦¬ì…‹ ë²„íŠ¼ -->
    <div class="preset-buttons">
      <button data-minutes="15">15ë¶„</button>
      <button data-minutes="20">20ë¶„</button>
      <button data-minutes="30">30ë¶„</button>
      <button data-minutes="40">40ë¶„</button>
      <button data-minutes="50">50ë¶„</button>
    </div>

    <!-- ì‹œê°„ í‘œì‹œ -->
    <div class="time-display">
      <div class="time-label" id="time-label">ì‹œê°„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”</div>
      <div id="time-text">--:--</div>
    </div>

    <!-- ì§„í–‰ ë°” -->
    <div class="progress-wrapper">
      <div class="progress-back">
        <div id="progress-bar"></div>
      </div>
      <div class="progress-info">
        <span id="preset-info">ì´ 0ë¶„</span>
        <span id="remain-info">ë‚¨ì€ 0%</span>
      </div>
    </div>

    <!-- ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
    <div class="control-buttons">
      <button id="toggle-btn">ì‹œì‘</button>
      <button id="reset-btn">ë¦¬ì…‹</button>
    </div>

    <p class="note">
      â‘  ìœ„ì—ì„œ ì‹œê°„ì„ ê³ ë¥´ê³  â‘¡ [ì‹œì‘]ì„ ëˆ„ë¥´ì„¸ìš”.<br>
      [ì‹œì‘] ë²„íŠ¼ì€ ë‹¤ì‹œ ëˆ„ë¥´ë©´ ì¼ì‹œì •ì§€ë©ë‹ˆë‹¤.
    </p>
  </div>

  <script>
    const presetButtons = document.querySelectorAll(".preset-buttons button");
    const timeText = document.getElementById("time-text");
    const timeLabel = document.getElementById("time-label");
    const progressBar = document.getElementById("progress-bar");
    const presetInfo = document.getElementById("preset-info");
    const remainInfo = document.getElementById("remain-info");
    const toggleBtn = document.getElementById("toggle-btn");
    const resetBtn = document.getElementById("reset-btn");

    let totalSeconds = 0;       // ì „ì²´ ì„¤ì • ì‹œê°„(ì´ˆ)
    let remainingSeconds = 0;   // ë‚¨ì€ ì‹œê°„(ì´ˆ)
    let timerId = null;
    let isRunning = false;

    // ì´ˆ -> "MM:SS" ë¬¸ìì—´ ë³€í™˜
    function formatTime(sec) {
      const m = Math.floor(sec / 60);
      const s = sec % 60;
      const mm = String(m).padStart(2, "0");
      const ss = String(s).padStart(2, "0");
      return mm + ":" + ss;
    }

    function updateDisplay() {
      if (totalSeconds === 0) {
        timeText.textContent = "--:--";
        presetInfo.textContent = "ì´ 0ë¶„";
        remainInfo.textContent = "ë‚¨ì€ 0%";
        progressBar.style.width = "0%";
        return;
      }

      timeText.textContent = formatTime(remainingSeconds);
      const totalMin = Math.round(totalSeconds / 60);
      presetInfo.textContent = "ì´ " + totalMin + "ë¶„";

      const ratio = remainingSeconds / totalSeconds;
      const percent = Math.round(ratio * 100);
      remainInfo.textContent = "ë‚¨ì€ " + percent + "%";
      progressBar.style.width = (ratio * 100) + "%";
    }

    function setTimer(minutes) {
      stopTimer();
      totalSeconds = minutes * 60;
      remainingSeconds = totalSeconds;
      timeLabel.textContent = minutes + "ë¶„ íƒ€ì´ë¨¸ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.";
      isRunning = false;
      toggleBtn.textContent = "ì‹œì‘";
      presetButtons.forEach(btn => btn.classList.remove("active"));
      // ëˆŒë¦° ë²„íŠ¼ì— active ìŠ¤íƒ€ì¼
      presetButtons.forEach(btn => {
        if (Number(btn.dataset.minutes) === minutes) {
          btn.classList.add("active");
        }
      });
      updateDisplay();
    }

    function startTimer() {
      if (totalSeconds === 0) {
        timeLabel.textContent = "ë¨¼ì € ìœ„ì—ì„œ ì‹œê°„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.";
        return;
      }
      if (remainingSeconds <= 0) {
        // ì´ë¯¸ ëë‚œ ìƒíƒœë¼ë©´ ë¦¬ì…‹ í›„ ì‹œì‘
        remainingSeconds = totalSeconds;
      }
      if (isRunning) return;
      isRunning = true;
      toggleBtn.textContent = "ì¼ì‹œì •ì§€";
      timeLabel.textContent = "ì§‘ì¤‘í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...";

      timerId = setInterval(() => {
        remainingSeconds--;
        if (remainingSeconds <= 0) {
          remainingSeconds = 0;
          updateDisplay();
          stopTimer();
          timeLabel.textContent = "íƒ€ì´ë¨¸ ì¢…ë£Œ! ìˆ˜ê³ í–ˆì–´ìš” ğŸ‘";
          alert("íƒ€ì´ë¨¸ê°€ ëë‚¬ìŠµë‹ˆë‹¤! ì ê¹ ì‰¬ì–´ë³¼ê¹Œìš”?");
          return;
        }
        updateDisplay();
      }, 1000);
    }

    function pauseTimer() {
      if (!isRunning) return;
      stopTimer();
      timeLabel.textContent = "ì¼ì‹œì •ì§€ ìƒíƒœì…ë‹ˆë‹¤.";
    }

    function stopTimer() {
      isRunning = false;
      toggleBtn.textContent = "ì‹œì‘";
      if (timerId !== null) {
        clearInterval(timerId);
        timerId = null;
      }
    }

    function resetTimer() {
      if (totalSeconds === 0) {
        remainingSeconds = 0;
        updateDisplay();
        timeLabel.textContent = "ì‹œê°„ì„ ë‹¤ì‹œ ì„ íƒí•´ ì£¼ì„¸ìš”.";
        return;
      }
      stopTimer();
      remainingSeconds = totalSeconds;
      updateDisplay();
      timeLabel.textContent = "ì²˜ìŒ ìƒíƒœë¡œ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤.";
    }

    // í”„ë¦¬ì…‹ ë²„íŠ¼ í´ë¦­
    presetButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const minutes = Number(btn.dataset.minutes);
        setTimer(minutes);
      });
    });

    // ì‹œì‘/ì¼ì‹œì •ì§€ ë²„íŠ¼
    toggleBtn.addEventListener("click", () => {
      if (isRunning) {
        pauseTimer();
      } else {
        startTimer();
      }
    });

    // ë¦¬ì…‹ ë²„íŠ¼
    resetBtn.addEventListener("click", resetTimer);

    // ì´ˆê¸° ìƒíƒœ í‘œì‹œ
    updateDisplay();
  </script>
</body>
</html>
